!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function l(e){var t={0:"\\d*?",9:"\\d?",A:"[\\dA-Za-z]*?",L:"[A-Za-z]?",Z:"[A-Za-z]*?"};return t[e]}function e(e,t){if("string"!=typeof e||"string"!=typeof t||""===t)return null;if(void 0===l(t[t.length-1]))throw new Error("Mask must not end with a separator: "+t[t.length-1]);var n=function(e){var t,n="",r=/([^09ALZ]*)?([09ALZ]*)+/g,a=0,o=[],s=[];function i(r){return function(e){return Array.prototype.reduce.call(e,function(e,t,n){return e+({A:function(e){return e.toUpperCase()},L:function(e){return e.toUpperCase()},Z:function(e){return e.toLowerCase()}}[r[n]]||function(e){return e||""})(t)},"")}}for(;null!==(t=r.exec(e))&&""!==t[0];){o.push(t[1]);var u=t[2].split("");a+=u.length,n+="("+u.map(l).join("")+")?",s.push(i(u))}return{regExp:new RegExp("^"+n+"$"),length:a,separators:o,mappers:s}}(t),r=(e=e.replace(/[^\dA-Za-z]/g,"")).length<=n.length&&n.regExp.exec(e);if(r){for(var a="",o=n.separators,s=1,i=r.length;s<i&&void 0!==r[s];){var u=n.mappers[s-1];a+=(o[s-1]||"")+u(r[s]),s++}return a}return""}angular.module("wt.easy",[]).directive("wtEasyMask",["$parse","$log","easyMask",function(p,c,f){return{restrict:"A",require:"ngModel",link:function(e,r,t,n){var o=f.getMask(t.wtEasyMask)||t.placeholder||"",a=t.wtEasyMaskOptions?p(t.wtEasyMaskOptions)(e):{},s=a.removeSeparators,i=a.removeMask,u=a.emptyPlaceholder;t.maxlength||t.$set("maxlength",o.length),t.$set("placeholder",u?"":t.placeholder||o);var l=function(e,t){return null==t||0===t.length||(n=t,r=o.match(/0/g),a=r?r.length:0,o.length-a<=n.length);var n,r,a};n.$validators.mask=function(e,t){return l(0,t)},n.$formatters.push(function(e){var t=f(e,o);return""!==t?t:e}),n.$parsers.push(function(e){var t=f(e,o);return s&&(c.warn("This option will soon be deprecated. Use removeMask instead."),t=t.replace(/[.\-/ ]/g,"")),i&&(t=t.replace(/[\W_]+/g,"")),""===t?null:t}),r.on("keypress",function(e){if(!e.altKey&&!e.ctrlKey)if(32===e.which)e.preventDefault();else if(!(e.which<48)&&r.prop("selectionStart")===r.prop("selectionEnd")){var t=r.val(),n=t.substring(0,r.prop("selectionStart"))+String.fromCharCode(e.which)+t.substring(r.prop("selectionEnd"));f(n,o).length<=t.length&&e.preventDefault()}}),r.on("input",function(e){var t=f(r.val(),o);n.$viewValue!==t&&(n.$setViewValue(t),n.$render())})}}}]).provider("easyMask",function(){var n=Object.create(null);this.publishMask=function(e,t){n[e.toLowerCase()]=t},this.$get=function(){return e.getMask=function(e){return n[e.toLowerCase()]||e},e}}).filter("easyMask",["easyMask",function(n){return function(e,t){return n(e,t)}}])});
