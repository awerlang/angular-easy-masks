!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function l(e){var t={0:"\\d*?",9:"\\d?",A:"[\\dA-Za-z]*?",L:"[A-Za-z]?",Z:"[A-Za-z]*?"};return t[e]}function e(e,t){if("string"!=typeof e||"string"!=typeof t||""===t)return null;if(void 0===l(t[t.length-1]))throw new Error("Mask must not end with a separator: "+t[t.length-1]);var r=function(e){var t,r="",n=/([^09ALZ]*)?([09ALZ]*)+/g,a=[],o=[];function s(n){return function(e){return Array.prototype.reduce.call(e,function(e,t,r){return e+({A:function(e){return e.toUpperCase()},L:function(e){return e.toUpperCase()},Z:function(e){return e.toLowerCase()}}[n[r]]||function(e){return e||""})(t)},"")}}for(;null!==(t=n.exec(e))&&""!==t[0];){a.push(t[1]);var i=t[2].split("");r+="("+i.map(l).join("")+")?",o.push(s(i))}return{regExp:new RegExp("^"+r+"$"),separators:a,mappers:o}}(t),n=r.regExp.exec(e.replace(/[^\dA-Za-z]/g,""));if(n){for(var a="",o=r.separators,s=1,i=n.length;s<i&&void 0!==n[s];){var u=r.mappers[s-1];a+=(o[s-1]||"")+u(n[s]),s++}return a}return""}angular.module("wt.easy",[]).directive("wtEasyMask",["$parse","$log","easyMask",function(p,c,f){return{restrict:"A",require:"ngModel",link:function(e,n,t,r){var o=f.getMask(t.wtEasyMask)||t.placeholder||"",a=t.wtEasyMaskOptions?p(t.wtEasyMaskOptions)(e):{},s=a.removeSeparators,i=a.removeMask,u=a.emptyPlaceholder;t.maxlength||t.$set("maxlength",o.length),t.$set("placeholder",u?"":t.placeholder||o);var l=function(e,t){return null==t||0===t.length||(r=t,n=o.match(/0/g),a=n?n.length:0,o.length-a<=r.length);var r,n,a};r.$validators.mask=function(e,t){return l(0,t)},r.$formatters.push(function(e){var t=f(e,o);return""!==t?t:e}),r.$parsers.push(function(e){var t=f(e,o);return s&&(c.warn("This option will soon be deprecated. Use removeMask instead."),t=t.replace(/[.\-/ ]/g,"")),i&&(t=t.replace(/[\W_]+/g,"")),""===t?null:t}),n.on("keypress",function(e){if(!e.altKey&&!e.ctrlKey)if(32===e.which)e.preventDefault();else if(!(e.which<48)&&n.prop("selectionStart")===n.prop("selectionEnd")){var t=n.val(),r=t.substring(0,n.prop("selectionStart"))+String.fromCharCode(e.which)+t.substring(n.prop("selectionEnd"));f(r,o).length<=t.length&&e.preventDefault()}}),n.on("input",function(e){var t=f(n.val(),o);r.$viewValue!==t&&(r.$setViewValue(t),r.$render())})}}}]).provider("easyMask",function(){var r=Object.create(null);this.publishMask=function(e,t){r[e.toLowerCase()]=t},this.$get=function(){return e.getMask=function(e){return r[e.toLowerCase()]||e},e}}).filter("easyMask",["easyMask",function(r){return function(e,t){return r(e,t)}}])});
